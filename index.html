<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sleconomicmarket</title>
  <meta name="description" content="Local marketplace for Sierra Leone — goods, services, rentals, jobs, bloggers."/>
  <link rel="icon" type="image/png" sizes="32x32" href="./sleco-slmap-favicon-32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="./sleco-slmap-favicon-48.png">
  <link rel="icon" type="image/png" sizes="192x192" href="./sleco-slmap-favicon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="./sleco-slmap-favicon-512.png">
  <link rel="apple-touch-icon" href="./apple-touch-icon-slmap.png">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    :root{
      --bg:#faf8f4; --fg:#2d1f12;
      --gold-300:#f3d48a; --gold-400:#e8c160; --gold-500:#d4a017; --gold-600:#b1840f;
      --card:#fffdf9; --muted:#6b5c4f; --border:#e7dccb; --accent:#b1840f;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:var(--fg);overflow-x:hidden}

    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,#fff8ec,#fff3db);border-bottom:1px solid var(--border)}
    .topbar{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;max-width:980px;margin:0 auto;padding:8px 12px;border-bottom:1px solid var(--border)}
    .topbar input{width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:12px;background:#fff;font-size:16px}
    .topbar .locbtn{padding:12px 14px;border-radius:12px;background:linear-gradient(180deg,var(--gold-400),var(--gold-600));border:1px solid var(--gold-500);color:#23180f;font-weight:700}

    .cats{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;max-width:980px;margin:0 auto;padding:8px 12px}
    .catbtn{display:flex;gap:8px;align-items:center;justify-content:center;padding:8px;border:1px solid var(--border);border-radius:12px;background:#fff;text-decoration:none;color:var(--fg);font-weight:800}
    .catbtn:hover{background:#fff7e6}
    .catbtn svg{width:16px;height:16px;flex:0 0 16px}

    nav{display:flex;gap:10px;flex-wrap:wrap;align-items:center;max-width:980px;margin:0 auto;padding:8px 12px}
    nav .spacer{flex:1}
    .accountBtn{display:flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;color:var(--fg);text-decoration:none;font-weight:700}
    .accountBtn svg{width:16px;height:16px}

    main{max-width:980px;margin:0 auto;padding:10px 12px 96px}
    h2{margin:8px 0 12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}

    .goods-grid{display:grid;gap:8px}
    @media (max-width:720px){ .goods-grid{grid-template-columns:repeat(3,1fr)} }
    @media (min-width:721px){ .goods-grid{grid-template-columns:repeat(4,1fr)} }
    .goods-card{background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .goods-card img{width:100%;aspect-ratio:1/1;object-fit:cover;display:block}
    .goods-card .meta{padding:6px 8px}
    .goods-card .meta h4{margin:0 0 4px 0;font-size:14px}
    .goods-card .meta p{margin:0;font-size:12px;color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px;position:relative;box-shadow:0 6px 18px rgba(212,160,23,.08)}
    .card .badge{position:absolute;top:10px;right:10px;background:var(--gold-500);color:#23180f;padding:3px 8px;border-radius:999px;font-size:12px;font-weight:700}
    .muted{color:var(--muted)}
    label{display:block;margin:8px 0}
    input,select,textarea,button{font:inherit}
    input,select,textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff}
    textarea{min-height:100px}
    .row{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .btn{display:inline-block;padding:10px 14px;border-radius:12px;background:linear-gradient(180deg,var(--gold-400),var(--gold-600));border:1px solid var(--gold-500);color:#23180f;font-weight:600;text-decoration:none}

    #backBtn{position:sticky;top:4px;left:4px;z-index:9;margin:4px 0 6px 0;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:#fff;cursor:pointer;font-size:12px}

    footer{position:fixed;left:0;right:0;bottom:0;border-top:1px solid var(--border);background:linear-gradient(180deg,#fff8ec,#fff3db)}
    .foot{max-width:980px;margin:0 auto;padding:6px 8px;display:flex;gap:6px;align-items:center;justify-content:space-between}
    .foot .btnbar{display:flex;gap:6px}
    .pill{padding:4px 8px;border:1px solid var(--border);border-radius:999px;background:#fff;font-size:11px}
    .btn{padding:8px 10px;font-size:12px;border-radius:10px}

    .hero{display:none;border-top:1px solid var(--border);border-bottom:1px solid var(--border);background:linear-gradient(180deg,#fff8ec,#fff3db)}
    .hero-inner{max-width:980px;margin:0 auto;padding:4px 12px 6px}
    .hero-box{position:relative;height:56px;border:1px solid var(--border);border-radius:12px;overflow:hidden;box-shadow:0 6px 16px rgba(212,160,23,.10)}
    .hero-slide{position:absolute;inset:0;display:grid;grid-template-columns:56px 1fr;align-items:center;gap:6px;padding:6px;opacity:0;pointer-events:none;transition:opacity .4s ease;font-size:12px}
    .hero-slide.active{opacity:1;pointer-events:auto}
    .floaty{animation:floaty 4s ease-in-out infinite}
    @keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-3px)}100%{transform:translateY(0)}}

    .item-hero{position:sticky;top:0;height:42vh;min-height:220px;background:#000;overflow:hidden}
    .item-hero img{width:100%;height:100%;object-fit:cover;display:block;opacity:1;transition:opacity .25s ease}
    .item-hero.hidden img{opacity:0}
    .item-hero .topbar{position:absolute;left:0;right:0;top:0;display:flex;justify-content:space-between;gap:8px;padding:8px}
    .chip{padding:6px 10px;background:#0008;color:#fff;border-radius:999px;border:1px solid #fff3;font-size:12px}
    .chip.btn{background:#000b;border-color:#fff6}

    /* NEW: filters + services category boxes + account avatar */
    .filterbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:6px 0 10px 0}
    .filterbar select,.filterbar label{font-size:12px}
    .filterbar .btn{padding:6px 10px;font-size:12px;border-radius:10px}
    .boxgrid{display:grid;gap:8px}
    @media (max-width:720px){ .boxgrid{grid-template-columns:repeat(3,1fr)} }
    @media (min-width:721px){ .boxgrid{grid-template-columns:repeat(5,1fr)} }
    .catbox{display:flex;gap:6px;align-items:center;justify-content:center;padding:10px;border:1px solid var(--border);border-radius:12px;background:#fff;text-align:center;cursor:pointer}
    .catbox svg{width:16px;height:16px}
    .avatar{width:72px;height:72px;border-radius:50%;object-fit:cover;border:1px solid var(--border);background:#fff}

    /* Auth overlay (gate) */
    #authGate{position:fixed;inset:0;background:#fff;z-index:9999;display:none;overflow:auto}
    #authGate .inner{max-width:520px;margin:40px auto;padding:16px}
    #authGate .step{display:none}
    #authGate .step.active{display:block}
    #authGate h2{margin-top:0}

    form{overflow-x:hidden}
    @media (max-width:720px){
      .cats{grid-template-columns:repeat(3,1fr)}
      .topbar{grid-template-columns:1fr;gap:6px}
    }
  </style>
</head>
<body>
  <!-- AUTH GATE -->
  <div id="authGate">
    <div class="inner">
      <h2>Welcome to Sleconomicmarket</h2>
      <div class="card step" id="stepChoice">
        <h3>Get started</h3>
        <div class="actions">
          <button class="btn" id="chooseLogin">I have an account</button>
          <button class="btn" id="chooseSignup">Create account</button>
        </div>
      </div>
      <div class="card step" id="stepLogin">
        <h3>Login</h3>
        <label>Email <input id="loginEmail" placeholder="you@example.com"></label>
        <label>Password <input id="loginPass" type="password" placeholder="••••••••"></label>
        <div class="actions"><button class="btn" id="doLogin">Login</button></div>
        <div class="actions" style="margin-top:8px"><span id="googleBtnGate"></span></div>
        <p class="muted">No account? <a href="#" id="toSignup">Create one</a></p>
      </div>
      <div class="card step" id="stepSignup1">
        <h3>Create account — Step 1</h3>
        <label>Email <input id="signEmail" placeholder="you@example.com"></label>
        <div class="actions"><button class="btn" id="sendCode">Send verification code</button></div>
        <p class="muted">Or <a href="#" id="toLogin">back to login</a></p>
      </div>
      <div class="card step" id="stepSignup2">
        <h3>Step 2 — Verify & Set Password</h3>
        <label>Verification code <input id="signCode" placeholder="6-digit"></label>
        <label>Password <input id="signPass" type="password" placeholder="Create a password"></label>
        <div class="actions"><button class="btn" id="doVerify">Verify & Sign up</button></div>
      </div>
    </div>
  </div>

  <header>
    <div class="topbar">
      <input id="globalSearch" placeholder="Search goods, services, rentals, jobs…"/>
      <button class="locbtn" id="goLocation">My Location</button>
    </div>

    <div class="cats">
      <a class="catbtn" href="#/goods">
        <svg viewBox="0 0 24 24"><path d="M4 7h16l-2 11H6L4 7zm2-3h12v2H6z" fill="#b1840f"/></svg>
        <span>Goods</span>
      </a>
      <a class="catbtn" href="#/services">
        <svg viewBox="0 0 24 24"><path d="M3 14l3-3 4 4 8-8 3 3-11 11z" fill="#b1840f"/></svg>
        <span>Services</span>
      </a>
      <a class="catbtn" href="#/rentals">
        <svg viewBox="0 0 24 24"><path d="M12 3l9 8h-3v9H6v-9H3z" fill="#b1840f"/></svg>
        <span>Rentals</span>
      </a>
      <a class="catbtn" href="#/jobs">
        <svg viewBox="0 0 24 24"><path d="M9 3h6v3h5v4H4V6h5V3zm-5 8h20v10H4V11z" fill="#b1840f"/></svg>
        <span>Jobs</span>
      </a>
      <a class="catbtn" href="#/ads">
        <svg viewBox="0 0 24 24"><path d="M3 5h18v4H3zM6 11h12v8H6z" fill="#b1840f"/></svg>
        <span>Advert with Bloggers</span>
      </a>
    </div>

    <nav>
      <span class="spacer"></span>
      <a id="settingsLink" href="#/settings" style="display:none">Settings</a>
      <a id="adminLink" href="#/admin" style="display:none">Admin</a>
      <a id="quotesLink" href="#/admin/quotes" style="display:none">Quotes</a>
      <a id="adCampLink" href="#/ads/campaigns" style="display:none">Ad Campaigns</a>
      <a id="adminAppAdsLink" href="#/admin/app-ads" style="display:none">App Ads</a>
      <a id="accountBtn" class="accountBtn" href="#/account" style="display:none">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a5 5 0 110 10 5 5 0 010-10zm0 12c-5 0-9 3-9 6v2h18v-2c0-3-4-6-9-6z" fill="#b1840f"/></svg>
        Account
      </a>
    </nav>

    <div id="heroSection" class="hero"><div class="hero-inner"><div id="heroRotator" class="hero-box"></div></div></div>
  </header>

  <main id="app"></main>

  <footer>
    <div class="foot">
      <div class="pill">AfriMoney: <strong id="afr">—</strong></div>
      <div class="pill">Orange Money: <strong id="orm">—</strong></div>
      <div class="btnbar">
        <a class="btn" href="#/inbox"    id="footInbox">Inbox</a>
        <a class="btn" href="#/listings" id="footListings">Listings</a>
        <a class="btn" href="#/post/goods" id="footPost">Post</a>
      </div>
    </div>
  </footer>

  <script defer src="./app.js"></script>
</body>
</html>
